{"version":3,"sources":["main.js","component/uAnchor.js","component/uRender.js","filter/uHtml.js","page/index.js","page/introduce.js","page/plp.js","service/WebApi.js","service/uCommon.js","page/index.html","page/introduce.html","page/plp.html"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;uECxBA;ACAA;ACAA","file":"app.js","sourcesContent":["/*\n |--------------------------------------------------------------------------\n | 设置本地模拟接口的目录\n |--------------------------------------------------------------------------\n | 如果不需要模拟 则删除此行\n |\n |\n */\n\nued.ajax.mock('mock')\n\n/*\n |--------------------------------------------------------------------------\n | 解决移动端 click 300ms 延迟\n |--------------------------------------------------------------------------\n | 如果页面比较特殊会出现 BUG 则删除此行\n |\n |\n */\n\nued.fastclick()\n\n/*\n |--------------------------------------------------------------------------\n | 微信 JSSDK 配置\n |--------------------------------------------------------------------------\n | 上线后，如果是 umaman.com 结尾的域名，这里不用改动\n | 如果是外部接口或者有特殊需求，请查看文档 /frontend/public/ued.js/doc/api.html\n |\n */\n\n//ued.weixin.uma()\n\n/*\n |--------------------------------------------------------------------------\n | 隐藏微信右上角分享按钮\n |--------------------------------------------------------------------------\n | 如果不需要隐藏，则删除此行\n | 如果想刚开始隐藏，等待 JSSDK 加载成功后才显示，也可以保留这行代码，不用删\n |\n */\n\n//wx.ready(function () {\r\n//  wx.hideOptionMenu()\r\n//})\n\n/*\n |--------------------------------------------------------------------------\n | 设置微信分享\n |--------------------------------------------------------------------------\n | 会在 config 成功后自动触发\n | 可以多次设置，会覆盖前面的设置\n |\n */\n\n// ued.weixin.share({\n//     title: '',\n//     desc: '',\n//     link: '',\n//     imgUrl: ''\n// })\n\n/*\n |--------------------------------------------------------------------------\n | 百度统计\n |--------------------------------------------------------------------------\n | ued.baidu.track('百度统计代码问号后面那一串内容')，多个可以用数组\n |\n |\n */\n\n// ued.baidu.track('???')\n\n/*\n |--------------------------------------------------------------------------\n | ICC 统计\n |--------------------------------------------------------------------------\n | ued.track('填 openid')\n | 如果这个时候还拿不到openid 就在拿到之后再调用一次 ued.track() 和 ued.trackPage()\n |\n */\n\n// ued.track('???')\n//ued.trackPage()\n\n/*\n |--------------------------------------------------------------------------\n | 定义 angular 模块\n |--------------------------------------------------------------------------\n | run 里可以注入 service 执行一些初始化逻辑\n | 如果不涉及 service 的调用，可以直接写在 run 外面\n |\n */\n\nangular.module('ued', []).run(function (WebApi) {\n\tgetWeiXin();\n\tfunction getWeiXin(){\n\t\tWebApi.getWeiXin().always(function(){\t\t\t\t\t\n\t\t}).then(function(res){\n\t\t\tconsole.info(res)\n\t\t\tconfigWeixin(res)\n\t\t\t\n\t\t},function(res){\n\t\t\tconsole.info(res)\n\t\t})\n\t}\n\n\tfunction configWeixin(weixin){\n\t\twx.config({\n\t\t\tappId: weixin.appId, // 必填，公众号的唯一标识\n\t\t\ttimestamp: weixin.timestamp, // 必填，生成签名的时间戳\n\t\t\tnonceStr: weixin.nonceStr, // 必填，生成签名的随机串\n\t\t\tsignature: weixin.signature,// 必填，签名，见附录1\n\t\t\tjsApiList: [ // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n\t\t\t\t'onMenuShareTimeline',//这里不知道你用的地理接口是哪个就两个都写上了\n\t\t\t\t'onMenuShareAppMessage',\n\t\t\t\t'startRecord',\n\t\t\t\t'stopRecord',\n\t\t\t\t'onVoiceRecordEnd',\n\t\t\t\t'playVoice',\t\t\t\t\n\t\t\t\t'stopVoice',\n\t\t\t\t'uploadVoice',\n\t\t\t\t'onVoicePlayEnd',\n\t\t\t\t'hideMenuItems',\n\t\t\t\t'hideOptionMenu'\n\t\t\t]\n\t\t});\n\t}\n})\n\n/*\n |--------------------------------------------------------------------------\n | 加载主题\n |--------------------------------------------------------------------------\n | 主题名：通常是从接口获取、或者从 cookie 获取\n | 是否插入模式：如果是从异步接口获取的数据再加载主题，需要设置为 true\n |\n */\n\nloadTheme('default')\n\nfunction loadTheme (theme, append) {\n    if (theme && theme != 'default') {\n        var version = $('html').data('version')\n        var css = 'dist/theme-' + theme + '.css?' + version\n        var js = 'dist/theme-' + theme + '.js?' + version\n        if (append) {\n            Promise.all([ued.loadStyle(css), ued.loadScript(js)]).then(bootstrap)\n            return\n        }\n        document.write('<link rel=\"stylesheet\" href=\"' + css + '\">')\n        document.write('<script src=\"' + js + '\"></script>')\n    }\n    bootstrap()\n}\n\nfunction bootstrap () {\n    angular.element(document).ready(function () {\n        angular.bootstrap(document, ['ued'])   //angular.bootstarp只会绑定第一次加载的对象   后面重复绑定或者其他对象绑定 都会在控制台输出错误\n//      angular.bootstrap(element,['module'],['config']); //手动加载angularjs的模板   参数1：绑定的ng-app的dom元素  参数2：绑定的模块  参数3：附加的配置\n    })\n}\n","/**\n * 处理 <a> 的 href 属性，让跳转不受 <base> 影响\n * 如果 href 为 空、#、javascript: 开头，点击会阻止\n *\n * 如果不需要处理 或者 遇到严重 BUG，删除本文件，使用 JS 跳转: ued.href() ued.replace()\n */\nangular.module('ued').directive('a', function () { //directive自定义指令 指令名称为a\n    return {\n        restrict: 'E', //取值有三种     A：用于元素Attribute   E:用于元素的名称        C：用于css中的class\n        link: function (scope, element, attrs) { //link函数可以用于绑定一些事件\n            $(element).on('click', function (event) {\n                var href = $.trim($(this).attr('href')) //$.trim去除字符串两端空白字符 获取目标a元素的href值\n                var target = $.trim($(this).attr('target')) //获取目标a元素的href值\n                if (href === '' || href === '#' || href.indexOf('javascript:') === 0) {\n                    return false\n                }\n                href = ued.path(href)\n                switch (target) {\n                    case '_blank':\n                        window.open(href) \n                        break\n                    case '_parent':\n                        window.parent.open(href) \n                        break\n                    case '_top':\n                        window.top.open(href) \n                        break\n                    default:\n                        var iframe = $('iframe[name=\"' + target + '\"]')\n                        if (target !== '_self' && iframe.length) {\n                            iframe.attr('src', href)\n                        } else {\n                            ued.href(href)\n                        }\n                }\n                return false\n            })\n        }\n    }\n})","/**\n * 拿到标签渲染完的回调\n *\n * @example\n *  <div u-render=\"onRender()\"></div>\n */\nangular.module('ued').directive('uRender', function ($timeout) { //定义一个名为uRender的指令\n    return {\n        restrict: 'A', //attribute属性  用在元素的属性上\n        link: function (scope, element, attrs) { //link函数用于绑定一些事件 和数据\n            scope.$watch(function () {            //绑定监听事件\n                scope.$eval(attrs.ngBindHtml)\n            }, function (value) {\n                $timeout(function () {\n                    scope.$eval(attrs.uRender, {$element: element})\n                })\n            })\n        }\n    }\n})","/**\r\n * 输出富文本\r\n *\r\n * @example\r\n *  <div ng-bind-html=\"xxx | uHtml\"></div>\r\n */\r\nangular.module('ued').filter('uHtml', function ($sce) { //过滤器名称为uHtml\r\n    return function (source) {\r\n        return $sce.trustAsHtml(source)  //把html格式的字符串转成html格式显示\r\n    }\r\n})","angular.module('ued').directive('pageIndex', function (WebApi) {\n    return {\n        templateUrl: 'page/index.html',\n        restrict: 'E',\n        link: function (scope) {\n\n//         var Authorization = null;\n//          _bridge.callHandler(\"Authorization\", null, function(response) {\n//\t\t\t\tAuthorization = response;\n//\t\t\t})\n\t\t\tscope.activityId = ued.query('activity_id');\n            scope.isOver = true;\n\n\t\t\tfunction setupWebViewJavascriptBridge(callback) {\n\t\t        if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }\n\t\t        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }\n\t\t        window.WVJBCallbacks = [callback];\n\t\t        var WVJBIframe = document.createElement('iframe');\n\t\t        WVJBIframe.style.display = 'none';\n\t\t        WVJBIframe.src = 'https://__bridge_loaded__';\n\t\t        document.documentElement.appendChild(WVJBIframe);\n\t\t        setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)\n\t\t    }\n\n\t\t    setupWebViewJavascriptBridge(function(bridge) {\n\t\t\t\tbridge.callHandler('Authorization', {'foo': 'bar'}, function(response) {\n\t\t\t\t\tscope.Authorization = response;\n\t\t\t\t\tgetPage(scope.activityId,scope.Authorization)\n\t\t\t\t})\n\t\t\t})\n\n\n\t\t\tfunction getPage(activityId,Authorization){\n\t\t\t\tWebApi.getActivity(activityId,{},Authorization).always(function(){\n\t\t\t\t}).then(function(res){\n\t                scope.infoData = res.data\n\t                ued.title(res.data.name)\n\t                var transfromDate = scope.infoData.end_time.replace(/-/g, \"/\");\n\t                scope.countDown = setInterval(function(){leftTimer(String(transfromDate))},1000);\n\n\t\t\t\t},function(res){\n\n\t            })\n\t\t\t}\n\n\n\n\t\t\tscope.singUp = function(){\n\t\t\t\tif(scope.isOver){\n\t\t\t\t\tweui.alert('?????')\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tWebApi.singUp(scope.activityId,{},scope.Authorization).always(function(){\n\t\t\t\t}).then(function(res){\n                    if(res.status == 200){\n                        weui.alert(res.msg)\n                    }else {\n                        weui.alert(res[1])\n                    }\n\n\t\t\t\t},function(res){\n\t\t\t\t\tconsole.info(res)\n\t            })\n\t\t\t}\n\n\n            function leftTimer(targetTime){\n                var leftTime = (new Date(targetTime).getTime()) - (new Date().getTime());\n                if(!leftTime || leftTime <= 0){\n                    scope.isOver = true;\n                    scope.$apply();\n                    clearInterval(scope.countDown)\n                    return;\n                }\n                scope.isOver = false;\n                scope.days = parseInt(leftTime / 1000 / 60 / 60 / 24 , 10);\n                scope.hours = parseInt(leftTime / 1000 / 60 / 60 % 24 , 10);\n                scope.minutes = parseInt(leftTime / 1000 / 60 % 60, 10);\n                scope.seconds = parseInt(leftTime / 1000 % 60, 10);\n                scope.days = checkTime(scope.days);\n                scope.hours = checkTime(scope.hours);\n                scope.minutes = checkTime(scope.minutes);\n                scope.seconds = checkTime(scope.seconds);\n                scope.$apply()\n            }\n            function checkTime(i){ //?0-9???????0??1??01\n                if(i<10)\n                {\n                    i = \"0\" + i;\n                }\n                return i;\n            }\n\n\t\t\t// ued.ajax({\n            //     url: 'http://api.box-fairy.com/student/test',\n            //     type: 'GET',\n            //     dataType: 'json',\n            //     headers: {\n            //         Authorization: Authorization\n            //     },\n            //     beforeSend: function (XMLHttpRequest) {\n            //         XMLHttpRequest.setRequestHeader(\"Authorization\",Authorization);\n            //     },\n            //     success: function(res){\n            //             console.info(res)\n            //     },\n            //     error: function(res){\n\n            //     }\n            // })\n\n\n\n            function showLoading () {\n                loading = weui.loading('加载中...')\n            }\n\n            function hideLoading () {\n                loading && loading.hide()\n            }\n       }\n    }\n})","angular.module('ued').directive('pageIntroduce', function (WebApi) {\n    return {\n        templateUrl: 'page/introduce.html',\n        restrict: 'E',\n        link: function (scope) {\n\n\t\t\tued.title('转介绍')\n\t\t\t\n\t\t\tfunction setupWebViewJavascriptBridge(callback) {\n\t\t        if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }\n\t\t        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }\n\t\t        window.WVJBCallbacks = [callback];\n\t\t        var WVJBIframe = document.createElement('iframe');\n\t\t        WVJBIframe.style.display = 'none';\n\t\t        WVJBIframe.src = 'https://__bridge_loaded__';\n\t\t        document.documentElement.appendChild(WVJBIframe);\n\t\t        setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)\n\t\t    }\n\t\t\n\t\t    setupWebViewJavascriptBridge(function(bridge) {\n\t\t\t\tbridge.callHandler('Authorization', {'foo': 'bar'}, function(response) {\n\t\t\t\t\tscope.Authorization = response;\t\t\t\t\t\n\t\t\t\t})\n\t\t\t})\n\t\t\t\n\t\t\tscope.send = function(){\n\t\t\t\tif(!(/(?:^1[3456789]|^9[28])\\d{9}$/.test($('.phone').val()))){\n\t\t\t\t\tweui.alert('请填写正确的手机号！')\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(!$('.name').val() || !$.trim($('.name').val())){\n\t\t\t\t\tweui.alert('请填称呼！')\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tsendMsg($('.phone').val(),$('.name').val(),$('.info').val(),scope.Authorization);\n\t\t\t}\n\t\t\t\n\t\t\tfunction sendMsg(phone,name,description,Authorization){\n\t\t\t\tWebApi.introduce({phone: phone,name: name,description: description},Authorization).always(function(){\n\t\t\t\t}).then(function(res){\n\t\t\t\t\tif(res.status == 200){\n\t\t\t\t\t\tweui.alert(res.msg)\n\t\t\t\t\t}\n\t               \n\t\t\t\t},function(res){\n\t\t\t\t\t\n\t            })\n\t\t\t}\n\t\t\t\n\t\t\t\n            function showLoading () {\n                loading = weui.loading('加载中...')\n            }\n\n            function hideLoading () {\n                loading && loading.hide()\n            }\n       }\n    }\n})","angular.module('ued').directive('pagePlp', function (WebApi) {\n    return {\n        templateUrl: 'page/plp.html',\n        restrict: 'E',\n        link: function (scope) {\n\n\t\t\t\n//\t\t\tscope.Authorization = 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6Ijk0NmVkMWE0NjIxMWE3OTUyOTBkYzI4ZGJkZTA2ZDUyZjQ4NTllOWY0ZDk3Mjk3MTdjMzIxZDNkZDBlZDM2ZWU4Nzc2OWMzYWQyNzA2Mzk3In0.eyJhdWQiOiIyIiwianRpIjoiOTQ2ZWQxYTQ2MjExYTc5NTI5MGRjMjhkYmRlMDZkNTJmNDg1OWU5ZjRkOTcyOTcxN2MzMjFkM2RkMGVkMzZlZTg3NzY5YzNhZDI3MDYzOTciLCJpYXQiOjE1NDQ0MzYzNTEsIm5iZiI6MTU0NDQzNjM1MSwiZXhwIjoxNTc1OTcyMzUxLCJzdWIiOiIzNjk4Iiwic2NvcGVzIjpbIioiXX0.KjYVJkGaDCVSdKLEEJGzmDg0Lm2Qtg00ZRRNR378XfLPOvmU8VoPH6TzPOL2UD2K_q3F5hztJ1lXH_TbuJnaD08Fi126us47FKGSoahKWV_NmCdbp8FoBQtIF1BehhUbFrzlj94HmAKEhLj7FBHvLJLsxj7dYayUxyBxQkNlJeHCa_WOEkHxIDDvROV0otuuz6qU9_QUm1TbBtFVjeUcORERteZu7kMPSjkbl1qt_AVDQFieveVYoDZtTOT608heUXYPQcQvSnV5AdNezrdezHVOH3ofK9OpLFZM8G0KkyPPR-1laij5In2RtRflwgRE4fWTPwlBkBz17PuepB7ILNj54e2kscmos7v3HAfcmOY3IsGM4Gcef86OktlXlIvxhBDiTBAz18RuVS-w6cQu4TkDMezmWJ7Y3Nct1zKe9S4apY8B1s_fuVbXMh5iWk_uvN158Jcnww6eqxaRdtzDECQczG7BNa2yJIa8we1wVvfHFc-QsSwt_4D9tvGjgUXRsDQ-nHxXQzDFUOqgVg1-V3Ytc0zR9p_ICepjIiEqQz_l4XIeJaTo_OmEWOIEaJWEiAmpaQeKmNfagGgBsV4Odb_IOZ94YXxRSBWkVj89Atb1YjcIsr2QjhQjD7jCPSTd6V7rhzuXqe-_ctCCS9vzQAJW7I0nYVCDW1aIsS9jxeM';\r\n//\t\t\t\n\t\t\t\n\t\t\tfunction setupWebViewJavascriptBridge(callback) {\n\t\t        if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }\n\t\t        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }\n\t\t        window.WVJBCallbacks = [callback];\n\t\t        var WVJBIframe = document.createElement('iframe');\n\t\t        WVJBIframe.style.display = 'none';\n\t\t        WVJBIframe.src = 'https://__bridge_loaded__';\n\t\t        document.documentElement.appendChild(WVJBIframe);\n\t\t        setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)\n\t\t    }\n\t\t\n\t\t    setupWebViewJavascriptBridge(function(bridge) {\n\t\t\t\tbridge.callHandler('Authorization', {'foo': 'bar'}, function(response) {\n\t\t\t\t\tscope.Authorization = response;\n\t\t\t\t\tgetPage(scope.Authorization)\n\t\t\t\t})\n\t\t\t})\n\t\t\n            \n            function getPage(Authorization){\n            \t\tWebApi.getInfo({},Authorization).always(function(){\n\t\t\t\t}).then(function(res){\n\t                \n\t\t\t\t\tscope.infoData = res.data;\n\t\t\t\t\tscope.testId = res.data.id;\n\t\t\t\t\tscope.infoData && scope.infoData.details.map( item => {\n\t\t\t\t\t\titem.checkedId = null;\n\t\t\t\t\t})\n\t\n\t\t\t\t},function(res){\n\t\t\t\t\tconsole.info(res)\n\t\t\t\t})\n            }\n\t\t\t\n\t\t\t\n\n\t\t\tscope.checkNum = 0;\n\t\t\tscope.clickItem = function(id,item){\n\t\t\t\titem.checkedId = id\n\t\t\t\tscope.checkNum = 0;\n\t\t\t\tscope.infoData.details.map( item => {\n\t\t\t\t\tif(item.checkedId){\n\t\t\t\t\t\tscope.checkNum ++\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tscope.submit = function(){\n\t\t\t\t\n\t\t\t\tif(scope.checkNum < scope.infoData.details.length){\r\n\t\t\t\t\tweui.alert('请填写完成再提交哦！')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tscope.formValue = [];\r\n\t\t\t\tscope.infoData.details.map( item => {\r\n\t\t\t\t\tvar list = {}\r\n\t\t\t\t\tlist.question_id = item.question.question_id\r\n\t\t\t\t\tlist.answer_id = item.checkedId\r\n\t\t\t\t\tscope.formValue.push(list)\r\n\t\t\t\t})\r\n\t\t\t\tscope.formData = {}\r\n\t\t\t\tscope.formData.data = JSON.stringify(scope.formValue);\r\n\t\t\t\tuploadTest(scope.testId,scope.formData,scope.Authorization)\n\t\t\t}\n\n\n\n\t\t\tfunction uploadTest(id,formdata,Authorization){\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: 'http://api.box-fairy.com/student/test/'+id+'/submit',\n\t\t\t\t\ttype: 'post',\n\t\t\t\t\tdata: formdata,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tbeforeSend: function (XMLHttpRequest) {\n\t\t\t\t\t\tXMLHttpRequest.setRequestHeader(\"Authorization\",Authorization);\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(res){\n\t\t\t\t\t\tweui.alert(res.msg,function(){\n\t\t\t\t\t\t\tued.reload();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t},\n\t\t\t\t\terror: function(res){\n\t\t\t\t\t\tweui.alert(res.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\n\n\n\n\n            function showLoading () {\n                loading = weui.loading('加载中...')\n            }\n\n            function hideLoading () {\n                loading && loading.hide()\n            }\n       }\n    }\n})","\n\nangular.module('ued').service('WebApi', function () {\n    /**\n     * 示例，应该删除\n     */\n//  this.test = function () {\n//      return ued.get('/hello').then(function (res) {\n//          // 可以先做一些数据处理等操作 再返回想要的内容，\n//          // 下一次 then 就是这里 return 的值\n//          var result = res.result\n//          result.abcd = 1234\n//          return result\n//      })\n//  }\n//\n//  this.abc = function () {\n//      return ued.post('/abc', {d: 'e'})\n//  }\n\n\n    //获取微信\n    this.getWeiXin = function (data) {\n    \t\treturn ued.get('https://weixin.bbpapp.com/lesson/weixin/getwxjsconfig',data)\n    }\n    //获取UserId\n    this.getUserId = function(data){\n    \t\treturn ued.get('https://freelesson.bbpapp.com/freelesson/getuserid',data)\n    }\n    this.getInfo = function (data,Authorization) {\n    \t\treturn ued.get('http://api.box-fairy.com/student/test',data,{beforeSend:function (XMLHttpRequest) {\n         \tXMLHttpRequest.setRequestHeader(\"Authorization\", Authorization);\n       }})\n    }\n\n    this.uploadTest = function (id,data,Authorization) {\n        return ued.post('http://api.box-fairy.com/student/test/'+id+'/submit',data,{beforeSend:function (XMLHttpRequest) {\n            XMLHttpRequest.setRequestHeader(\"Authorization\", Authorization);\n        }})\n    }\n\n\n    this.getActivity = function (id,data,Authorization) {\n        return ued.get('http://api.box-fairy.com/activity/'+id+'',data,{beforeSend:function (XMLHttpRequest) {\n            XMLHttpRequest.setRequestHeader(\"Authorization\", Authorization);\n        }})\n    }\n\n    this.singUp = function (id,data,Authorization) {\n        return ued.post('http://api.box-fairy.com/student/activity/'+id+'/signup',data,{beforeSend:function (XMLHttpRequest) {\n            XMLHttpRequest.setRequestHeader(\"Authorization\", Authorization);\n        }})\n    }\n\n    this.introduce = function (data,Authorization) {\n        return ued.post('http://api.box-fairy.com/student/recommend',data,{beforeSend:function (XMLHttpRequest) {\n            XMLHttpRequest.setRequestHeader(\"Authorization\", Authorization);\n        }})\n    }\n\n\n\n})\n","angular.module('ued').service('uCommon', function (WebApi) {\r\n\tvar uCommon = {}\r\n\t\r\n\t//判断授权\r\n\tuCommon.getUsercookie = function(){\r\n\t\tif(!ued.cookie.get('Weixin_userInfo')){\r\n\t\t\tvar enlink = window.location.origin+'/toutiao/index.html';\r\n\t\t\tued.href(window.location.origin+'/headlines/auth/weixinauth?callbackUrl='+enlink+'');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\r\n\treturn uCommon\r\n})","\n<div class=\"head\">\n\t<div class=\"head-left\">\n\t\t<img src=\"{{infoData.tenant.avatar}}\" width=\"80\" height=\"69\" alt=\"\" />\n\t\t<span>{{infoData.tenant.name}}</span>\n\t</div>\n\t<div class=\"head-right\">\n\t\t<p>发布日期：<span>{{infoData.created_at.split(' ')[0]}}</span></p>\n\t</div>\n</div>\n\n<div class=\"banner\">\n\t<img src=\"\" ng-src=\"{{infoData.image}}\" alt=\"\" />\n</div>\n\n<div class=\"title\">\n\t<p>{{infoData.name}}</p>\n</div>\n\n<div class=\"info\">\n\t<div class=\"info-item\">\n\t\t<div class=\"icon-box\">\n\t\t\t<img src=\"static/icon-1.png\" alt=\"\" />\n\t\t</div>\n\t\t<div class=\"info-text\">\n\t\t\t<p>{{infoData.start_time}}</p>\n\t\t</div>\n\t</div>\n\t<div class=\"info-item\">\n\t\t<div class=\"icon-box\">\n\t\t\t<img src=\"static/icon-2.png\" alt=\"\" />\n\t\t</div>\n\t\t<div class=\"info-text\">\n\t\t\t<p>{{infoData.address}}</p>\n\t\t</div>\n\t</div>\n\t<div class=\"info-item\">\n\t\t<div class=\"icon-box\">\n\t\t\t<img src=\"static/icon-3.png\" alt=\"\" />\n\t\t</div>\n\t\t<div class=\"info-text\">\n\t\t\t<p>已报名{{infoData.join}}人 / <span ng-if=\"infoData.number != 0\">限{{infoData.number}}人报名</span><span ng-if=\"infoData.number == 0\">不限人数</span></p>\n\t\t</div>\n\t</div>\n\t<div class=\"info-item\">\n\t\t<div class=\"icon-box\">\n\t\t\t<img src=\"static/icon-4.png\" alt=\"\" />\n\t\t</div>\n\t\t<div class=\"info-text\">\n\t\t\t<p class=\"price\" ng-if=\"infoData.amount != 0\">{{infoData.amount}} 元</p>\n\t\t\t<p class=\"price\" ng-if=\"infoData.amount == 0\">免费</p>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"content\">\n\t<div class=\"content-head\">\n\t\t<p class=\"content-title\">活动详情</p>\n\t\t<img class=\"content-icon\" src=\"static/icon-5.png\">\n\t\t<p class=\"content-text\">\n\t\t\t<span></span>\n\t\t\t活动内容\n\t\t</p>\n\t</div>\n\t<div class=\"content-main\">\n\t\t<p class=\"content-center\">{{infoData.discription}}</p>\n\t</div>\n</div>\n\n<div class=\"content\">\n\t<div class=\"content-head content-border\">\n\t\t<p class=\"content-text\">\n\t\t\t<span></span>\n\t\t\t活动介绍\n\t\t</p>\n\t\t<!--<p class=\"main-title\">活动分为两场，本场时间为12月20日 10:3-11:30 </p>\n\t\t<p class=\"main-title\">活动地点：丹凤路 消防大队云阳中队</p>-->\n\t</div>\n\t<div class=\"content-main\" ng-bind-html=\"infoData.content | uHtml\">\n\n\t</div>\n</div>\n\n<div class=\"bottom\">\n\t<div class=\"btm-left\">\n\t\t<p ng-show=\"!isOver\">距结束：<span>{{days}}天{{hours}}小时{{minutes}}分钟</span></p>\n\t\t<p ng-show=\"isOver\">已结束</p>\n\t</div>\n\t<div class=\"btm-right\" ng-class=\"{'is-disable': isOver}\" ng-click=\"singUp()\">\n\t\t报名\n\t</div>\n</div>","\n<div class=\"box\">\n\t<div class=\"content\">\n\t\t<img src=\"static/icon-phone.png\" alt=\"\" />\n\t\t<input class=\"phone\" type=\"text\" placeholder=\"请输入手机号码\"/>\n\t</div>\n</div>\n<div class=\"box\">\n\t<div class=\"content\">\n\t\t<img src=\"static/icon-man.png\" alt=\"\" />\n\t\t<input class=\"name\" type=\"text\" placeholder=\"称呼\"/>\n\t</div>\n</div>\n<div class=\"box border-none\">\n\t<div class=\"content content-info\">\n\t\t<img class=\"info-icon\" src=\"static/icon-question.png\" alt=\"\" />\n\t\t<span class=\"info-title\">备注</span>\n\t\t<textarea class=\"info\" name=\"info\" rows=\"3\" cols=\"\">\n\t\t\t\n\t\t</textarea>\n\t</div>\n</div>\n\n<div class=\"btn\" ng-click=\"send()\">发送</div>","\n<div class=\"head\">\n\t<div class=\"head-icon\">\n\t\t<img src=\"static/icon-6.png\">\n\t</div>\n\t<div class=\"head-text\">\n\t\t<p>为了给您提供更优质的服务，请您为我校提出宝贵 意见和建议，谨向您致以最真诚的谢意。</p>\n\t</div>\n</div>\n\n<div class=\"box\">\n\t<div class=\"box-item\" ng-repeat=\"item in infoData.details\" id=\"{{item.question.question_id}}\">\n\t\t<p class=\"item-title\">{{$index + 1}}、{{item.question.question}}</p>\n\t\t<div class=\"item-aws\" ng-repeat=\"answer in item.answer\" id=\"{{answer.id}}\" ng-click=\"clickItem(answer.id,item)\">\n\t\t\t<i class=\"item-icon-success\" ng-show=\"item.checkedId == answer.id\"></i>\n\t\t\t<i class=\"item-icon-circle\" ng-show=\"item.checkedId != answer.id\"></i>\n\t\t\t<p>{{answer.answer}}</p>\n\t\t</div>\n\t</div>\n\n</div>\n\n<div class=\"bottom\">\n\t<div class=\"btm-left\">\n\t\t<p>已完成 <span>{{checkNum}}</span>/{{infoData.details.length}}</p>\n\t</div>\n\t<div class=\"btm-right\" ng-click=\"submit()\">\n\t\t提交\n\t</div>\n</div>"]}